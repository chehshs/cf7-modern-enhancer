# CF7 Modern Enhancer (CF7 Wizard)

Contact Form 7 (CF7) の管理画面をモダンな直感的操作にアップデートし、日本国内のウェブ運用で必須となる「確認画面」と「サンクスページ遷移」をノーコードで実現するWordPressプラグインです。

## 🌟 主な特徴

- **ドラッグ＆ドロップ フォームビルダー**: CF7の複雑なタグを意識せず、直感的にフォームレイアウトを作成可能。
- **自動生成される確認画面**: フォームごとに固有の確認ページを自動生成。PHPによる堅牢なページ遷移方式を採用。
- **柔軟なサンクスページ設定**: サイト内の固定ページから遷移先をプルダウンで選択可能。
- **モダンな管理画面UI**: 設定とプレビューを同時に確認できる2カラムレイアウト。
- **マルチフォーム対応**: 英語スラッグによる識別管理で、複数のフォームが共存してもデータが競合しません。

## 🛠 技術的なこだわり（堅牢な設計）

本プラグインは、単なる機能追加ではなく、実務での運用に耐えうる「壊れにくい設計」を重視しています。

- **セッション空間の分離**: 各フォームの確認データは、固有のスラッグとトークンを組み合わせたセッションキーで管理。複数タブでの同時操作時もデータの上書きを防ぎます。
- **サーバーサイド・バリデーション**: UI上のスラッグロックだけでなく、保存時にもサーバー側でスラッグの一意性と不変性をチェック。システムの整合性を保証します。
- **自動復元ロジック**: ユーザーが誤って確認画面の固定ページを編集・破損させた場合でも、プラグイン側でショートコードの存在を検知し、自動的に修復・再挿入します。
- **セキュリティ**: Ajax通信時のNonceチェック、権限チェック、および出力時の適切なエスケープ（XSS対策）を徹底しています。

## 🚀 使い方

1. プラグインをインストールし有効化します。
2. 管理画面の「CF7 Wizard」メニューを開きます。
3. 「新規作成」からタイトルと英語スラッグを入力します。
4. フォーム項目をドラッグ＆ドロップで配置します。
5. 「確認・完了設定」タブで確認画面の有効化とサンクスページを選択し、保存します。

## 📋 動作環境

- WordPress 6.0以上
- Contact Form 7 5.7以上
- PHP 7.4以上

## ⚖️ License

GPL v2 or later.
